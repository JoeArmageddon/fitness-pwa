"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai/parse-food/route";
exports.ids = ["app/api/ai/parse-food/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fparse-food%2Froute&page=%2Fapi%2Fai%2Fparse-food%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fparse-food%2Froute.ts&appDir=C%3A%5CUsers%5Ctakia%5CDesktop%5CProjects%5Cfitness-pwa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ctakia%5CDesktop%5CProjects%5Cfitness-pwa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fparse-food%2Froute&page=%2Fapi%2Fai%2Fparse-food%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fparse-food%2Froute.ts&appDir=C%3A%5CUsers%5Ctakia%5CDesktop%5CProjects%5Cfitness-pwa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ctakia%5CDesktop%5CProjects%5Cfitness-pwa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_takia_Desktop_Projects_fitness_pwa_app_api_ai_parse_food_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ai/parse-food/route.ts */ \"(rsc)/./app/api/ai/parse-food/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai/parse-food/route\",\n        pathname: \"/api/ai/parse-food\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai/parse-food/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\takia\\\\Desktop\\\\Projects\\\\fitness-pwa\\\\app\\\\api\\\\ai\\\\parse-food\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_takia_Desktop_Projects_fitness_pwa_app_api_ai_parse_food_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ai/parse-food/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaSUyRnBhcnNlLWZvb2QlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFpJTJGcGFyc2UtZm9vZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFpJTJGcGFyc2UtZm9vZCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUN0YWtpYSU1Q0Rlc2t0b3AlNUNQcm9qZWN0cyU1Q2ZpdG5lc3MtcHdhJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUN0YWtpYSU1Q0Rlc2t0b3AlNUNQcm9qZWN0cyU1Q2ZpdG5lc3MtcHdhJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNvQztBQUNqSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpdG5lc3MtcHdhLz81ZjJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHRha2lhXFxcXERlc2t0b3BcXFxcUHJvamVjdHNcXFxcZml0bmVzcy1wd2FcXFxcYXBwXFxcXGFwaVxcXFxhaVxcXFxwYXJzZS1mb29kXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9haS9wYXJzZS1mb29kL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWkvcGFyc2UtZm9vZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWkvcGFyc2UtZm9vZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXHRha2lhXFxcXERlc2t0b3BcXFxcUHJvamVjdHNcXFxcZml0bmVzcy1wd2FcXFxcYXBwXFxcXGFwaVxcXFxhaVxcXFxwYXJzZS1mb29kXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9haS9wYXJzZS1mb29kL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fparse-food%2Froute&page=%2Fapi%2Fai%2Fparse-food%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fparse-food%2Froute.ts&appDir=C%3A%5CUsers%5Ctakia%5CDesktop%5CProjects%5Cfitness-pwa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ctakia%5CDesktop%5CProjects%5Cfitness-pwa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ai/parse-food/route.ts":
/*!****************************************!*\
  !*** ./app/api/ai/parse-food/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n// ============================================================\n// API ROUTE: /api/ai/parse-food\n// Server-side so GEMINI_API_KEY / GROQ_API_KEY are available\n// ============================================================\n\nconst GEMINI_KEY = process.env.GEMINI_API_KEY;\nconst GROQ_KEY = process.env.GROQ_API_KEY;\nasync function callGemini(text) {\n    if (!GEMINI_KEY) return null;\n    try {\n        const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_KEY}`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                contents: [\n                    {\n                        parts: [\n                            {\n                                text: `You are a precise nutrition expert specializing in Indian food.\r\nParse this meal description and return ONLY valid JSON. No markdown, no explanation.\r\n\r\nMeal: \"${text}\"\r\n\r\nReturn this exact JSON structure:\r\n{\r\n  \"items\": [\r\n    {\r\n      \"name\": \"food name\",\r\n      \"quantity_g\": 150,\r\n      \"calories\": 200,\r\n      \"protein\": 10.5,\r\n      \"carbs\": 30.2,\r\n      \"fat\": 5.1\r\n    }\r\n  ],\r\n  \"total_calories\": 200,\r\n  \"total_protein\": 10.5,\r\n  \"total_carbs\": 30.2,\r\n  \"total_fat\": 5.1,\r\n  \"confidence\": \"high\"\r\n}\r\n\r\nRules:\r\n- Use accurate ICMR/USDA nutrition values for Indian foods\r\n- For rotis: ~100 kcal, 3g protein, 18g carbs, 2g fat each (30g each)\r\n- For dal fry (200g): ~260 kcal, 14g protein, 36g fat, 7g fat\r\n- For rice (1 cup cooked, 150g): ~195 kcal, 4g protein, 42g carbs, 0.5g fat\r\n- Be precise with quantities based on context clues\r\n- confidence must be \"high\", \"medium\", or \"low\"`\n                            }\n                        ]\n                    }\n                ],\n                generationConfig: {\n                    temperature: 0.1,\n                    maxOutputTokens: 1024\n                }\n            })\n        });\n        if (!res.ok) return null;\n        const data = await res.json();\n        return data?.candidates?.[0]?.content?.parts?.[0]?.text ?? null;\n    } catch  {\n        return null;\n    }\n}\nasync function callGroq(text) {\n    if (!GROQ_KEY) return null;\n    try {\n        const res = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: `Bearer ${GROQ_KEY}`\n            },\n            body: JSON.stringify({\n                model: \"llama3-8b-8192\",\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"You are a precise nutrition expert for Indian food. Return ONLY valid JSON. No markdown, no backticks, no explanation.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: `Parse this Indian meal into nutrition data: \"${text}\"\r\n\r\nReturn ONLY this JSON:\r\n{\r\n  \"items\": [{\"name\": \"string\", \"quantity_g\": number, \"calories\": number, \"protein\": number, \"carbs\": number, \"fat\": number}],\r\n  \"total_calories\": number,\r\n  \"total_protein\": number,\r\n  \"total_carbs\": number,\r\n  \"total_fat\": number,\r\n  \"confidence\": \"high\"\r\n}\r\n\r\nUse accurate values: roti=100kcal/3p/18c/2f per piece, dal=130kcal/7p/18c/3.5f per 150g, rice=195kcal/4p/42c/0.5f per 150g cooked`\n                    }\n                ],\n                temperature: 0.1,\n                max_tokens: 512\n            })\n        });\n        if (!res.ok) return null;\n        const data = await res.json();\n        return data?.choices?.[0]?.message?.content ?? null;\n    } catch  {\n        return null;\n    }\n}\nfunction safeJSON(raw) {\n    try {\n        const cleaned = raw.replace(/```json\\s*/gi, \"\").replace(/```\\s*/g, \"\").trim();\n        return JSON.parse(cleaned);\n    } catch  {\n        const match = raw.match(/\\{[\\s\\S]*\\}/);\n        if (match) {\n            try {\n                return JSON.parse(match[0]);\n            } catch  {\n                return null;\n            }\n        }\n        return null;\n    }\n}\n// Local Indian food fallback with real macros\nconst QUICK_DB = {\n    \"roti\": {\n        cal: 100,\n        p: 3,\n        c: 18,\n        f: 2,\n        serving: 30,\n        unit: \"piece\"\n    },\n    \"chapati\": {\n        cal: 100,\n        p: 3,\n        c: 18,\n        f: 2,\n        serving: 30,\n        unit: \"piece\"\n    },\n    \"paratha\": {\n        cal: 200,\n        p: 4.5,\n        c: 28,\n        f: 7,\n        serving: 60,\n        unit: \"piece\"\n    },\n    \"rice\": {\n        cal: 195,\n        p: 4,\n        c: 42,\n        f: 0.5,\n        serving: 150,\n        unit: \"cup\"\n    },\n    \"dal\": {\n        cal: 195,\n        p: 10.5,\n        c: 27,\n        f: 5,\n        serving: 150,\n        unit: \"bowl\"\n    },\n    \"dal fry\": {\n        cal: 260,\n        p: 14,\n        c: 36,\n        f: 7,\n        serving: 200,\n        unit: \"bowl\"\n    },\n    \"rajma\": {\n        cal: 246,\n        p: 13.5,\n        c: 41,\n        f: 1,\n        serving: 150,\n        unit: \"bowl\"\n    },\n    \"chole\": {\n        cal: 246,\n        p: 13.5,\n        c: 41,\n        f: 1,\n        serving: 150,\n        unit: \"bowl\"\n    },\n    \"paneer\": {\n        cal: 265,\n        p: 18,\n        c: 3.4,\n        f: 20,\n        serving: 100,\n        unit: \"100g\"\n    },\n    \"chicken\": {\n        cal: 248,\n        p: 46.5,\n        c: 0,\n        f: 5.4,\n        serving: 150,\n        unit: \"piece\"\n    },\n    \"egg\": {\n        cal: 78,\n        p: 6.5,\n        c: 0.6,\n        f: 5,\n        serving: 50,\n        unit: \"piece\"\n    },\n    \"milk\": {\n        cal: 100,\n        p: 8,\n        c: 12,\n        f: 2.4,\n        serving: 240,\n        unit: \"glass\"\n    },\n    \"curd\": {\n        cal: 196,\n        p: 22,\n        c: 6.8,\n        f: 8.6,\n        serving: 200,\n        unit: \"bowl\"\n    },\n    \"dahi\": {\n        cal: 196,\n        p: 22,\n        c: 6.8,\n        f: 8.6,\n        serving: 200,\n        unit: \"bowl\"\n    },\n    \"idli\": {\n        cal: 39,\n        p: 2,\n        c: 7.9,\n        f: 0.2,\n        serving: 50,\n        unit: \"piece\"\n    },\n    \"dosa\": {\n        cal: 168,\n        p: 3.7,\n        c: 25,\n        f: 5.9,\n        serving: 100,\n        unit: \"piece\"\n    },\n    \"sambar\": {\n        cal: 88,\n        p: 5,\n        c: 14,\n        f: 2.4,\n        serving: 200,\n        unit: \"bowl\"\n    },\n    \"poha\": {\n        cal: 165,\n        p: 3.6,\n        c: 34.5,\n        f: 1.4,\n        serving: 150,\n        unit: \"plate\"\n    },\n    \"oats\": {\n        cal: 311,\n        p: 13.6,\n        c: 52.8,\n        f: 5.6,\n        serving: 80,\n        unit: \"bowl\"\n    },\n    \"banana\": {\n        cal: 105,\n        p: 1.3,\n        c: 27,\n        f: 0.4,\n        serving: 118,\n        unit: \"piece\"\n    },\n    \"apple\": {\n        cal: 95,\n        p: 0.5,\n        c: 25,\n        f: 0.3,\n        serving: 182,\n        unit: \"piece\"\n    },\n    \"bread\": {\n        cal: 80,\n        p: 2.7,\n        c: 14.7,\n        f: 1,\n        serving: 30,\n        unit: \"slice\"\n    },\n    \"peanut butter\": {\n        cal: 188,\n        p: 8,\n        c: 6.4,\n        f: 16,\n        serving: 32,\n        unit: \"tbsp\"\n    },\n    \"whey\": {\n        cal: 120,\n        p: 24,\n        c: 2.1,\n        f: 1.5,\n        serving: 30,\n        unit: \"scoop\"\n    },\n    \"almonds\": {\n        cal: 162,\n        p: 5.9,\n        c: 6.1,\n        f: 14,\n        serving: 28,\n        unit: \"handful\"\n    },\n    \"ghee\": {\n        cal: 90,\n        p: 0,\n        c: 0,\n        f: 10,\n        serving: 10,\n        unit: \"tsp\"\n    }\n};\nfunction localParse(text) {\n    const lower = text.toLowerCase();\n    const items = [];\n    let totalCal = 0, totalP = 0, totalC = 0, totalF = 0;\n    for (const [food, macro] of Object.entries(QUICK_DB)){\n        if (!lower.includes(food)) continue;\n        // Extract quantity before food name\n        const pattern = new RegExp(`(\\\\d+(?:\\\\.\\\\d+)?)\\\\s*(?:pieces?|rotis?|cups?|bowls?|glasses?|plates?|scoops?|slices?|tbsp|tsp|g|kg)?\\\\s*(?:of\\\\s+)?${food.replace(\" \", \"\\\\s+\")}`, \"i\");\n        const match = lower.match(pattern);\n        let qty = 1;\n        if (match) qty = parseFloat(match[1]);\n        // Also check words before\n        const wordsBefore = lower.substring(Math.max(0, lower.indexOf(food) - 20), lower.indexOf(food));\n        const numWords = {\n            one: 1,\n            two: 2,\n            three: 3,\n            four: 4,\n            five: 5,\n            half: 0.5\n        };\n        for (const [w, v] of Object.entries(numWords)){\n            if (wordsBefore.includes(w)) qty = v;\n        }\n        const grams = macro.serving * qty;\n        const factor = grams / 100;\n        const cal = Math.round(macro.cal * factor);\n        const p = Math.round(macro.p * factor * 10) / 10;\n        const c = Math.round(macro.c * factor * 10) / 10;\n        const f = Math.round(macro.f * factor * 10) / 10;\n        items.push({\n            name: `${qty > 1 ? qty + \" \" : \"\"}${food}`,\n            quantity_g: Math.round(grams),\n            calories: cal,\n            protein: p,\n            carbs: c,\n            fat: f\n        });\n        totalCal += cal;\n        totalP += p;\n        totalC += c;\n        totalF += f;\n    }\n    return {\n        items,\n        total_calories: Math.round(totalCal),\n        total_protein: Math.round(totalP * 10) / 10,\n        total_carbs: Math.round(totalC * 10) / 10,\n        total_fat: Math.round(totalF * 10) / 10,\n        confidence: items.length > 0 ? \"medium\" : \"low\"\n    };\n}\nasync function POST(req) {\n    const { text } = await req.json();\n    if (!text?.trim()) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"No text provided\"\n        }, {\n            status: 400\n        });\n    }\n    // Try Gemini first\n    const geminiRaw = await callGemini(text);\n    if (geminiRaw) {\n        const parsed = safeJSON(geminiRaw);\n        if (parsed?.items?.length && parsed.total_calories > 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ...parsed,\n                source: \"gemini\"\n            });\n        }\n    }\n    // Try Groq\n    const groqRaw = await callGroq(text);\n    if (groqRaw) {\n        const parsed = safeJSON(groqRaw);\n        if (parsed?.items?.length && parsed.total_calories > 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ...parsed,\n                source: \"groq\"\n            });\n        }\n    }\n    // Local fallback\n    const local = localParse(text);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        ...local,\n        source: \"local\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TXdGLElBQUl6RSxJQUFJO0lBQy9CLElBQUksQ0FBQ2YsTUFBTThCLFFBQVE7UUFDakIsT0FBT3RDLHFEQUFZQSxDQUFDdUIsSUFBSSxDQUFDO1lBQUUwRSxPQUFPO1FBQW1CLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ3hFO0lBRUEsbUJBQW1CO0lBQ25CLE1BQU1DLFlBQVksTUFBTTVGLFdBQVdDO0lBQ25DLElBQUkyRixXQUFXO1FBQ2IsTUFBTUMsU0FBU2xFLFNBQWNpRTtRQUM3QixJQUFJQyxRQUFRakQsT0FBTzJDLFVBQVVNLE9BQU9YLGNBQWMsR0FBRyxHQUFHO1lBQ3RELE9BQU96RixxREFBWUEsQ0FBQ3VCLElBQUksQ0FBQztnQkFBRSxHQUFHNkUsTUFBTTtnQkFBRUMsUUFBUTtZQUFTO1FBQ3pEO0lBQ0Y7SUFFQSxXQUFXO0lBQ1gsTUFBTUMsVUFBVSxNQUFNNUUsU0FBU2xCO0lBQy9CLElBQUk4RixTQUFTO1FBQ1gsTUFBTUYsU0FBU2xFLFNBQWNvRTtRQUM3QixJQUFJRixRQUFRakQsT0FBTzJDLFVBQVVNLE9BQU9YLGNBQWMsR0FBRyxHQUFHO1lBQ3RELE9BQU96RixxREFBWUEsQ0FBQ3VCLElBQUksQ0FBQztnQkFBRSxHQUFHNkUsTUFBTTtnQkFBRUMsUUFBUTtZQUFPO1FBQ3ZEO0lBQ0Y7SUFFQSxpQkFBaUI7SUFDakIsTUFBTUUsUUFBUXZELFdBQVd4QztJQUN6QixPQUFPUixxREFBWUEsQ0FBQ3VCLElBQUksQ0FBQztRQUFFLEdBQUdnRixLQUFLO1FBQUVGLFFBQVE7SUFBUTtBQUN2RCIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpdG5lc3MtcHdhLy4vYXBwL2FwaS9haS9wYXJzZS1mb29kL3JvdXRlLnRzPzkxYjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEFQSSBST1VURTogL2FwaS9haS9wYXJzZS1mb29kXHJcbi8vIFNlcnZlci1zaWRlIHNvIEdFTUlOSV9BUElfS0VZIC8gR1JPUV9BUElfS0VZIGFyZSBhdmFpbGFibGVcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5cclxuY29uc3QgR0VNSU5JX0tFWSA9IHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZO1xyXG5jb25zdCBHUk9RX0tFWSA9IHByb2Nlc3MuZW52LkdST1FfQVBJX0tFWTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNhbGxHZW1pbmkodGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcbiAgaWYgKCFHRU1JTklfS0VZKSByZXR1cm4gbnVsbDtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgIGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzL2dlbWluaS0xLjUtZmxhc2g6Z2VuZXJhdGVDb250ZW50P2tleT0ke0dFTUlOSV9LRVl9YCxcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGNvbnRlbnRzOiBbe1xyXG4gICAgICAgICAgICBwYXJ0czogW3tcclxuICAgICAgICAgICAgICB0ZXh0OiBgWW91IGFyZSBhIHByZWNpc2UgbnV0cml0aW9uIGV4cGVydCBzcGVjaWFsaXppbmcgaW4gSW5kaWFuIGZvb2QuXHJcblBhcnNlIHRoaXMgbWVhbCBkZXNjcmlwdGlvbiBhbmQgcmV0dXJuIE9OTFkgdmFsaWQgSlNPTi4gTm8gbWFya2Rvd24sIG5vIGV4cGxhbmF0aW9uLlxyXG5cclxuTWVhbDogXCIke3RleHR9XCJcclxuXHJcblJldHVybiB0aGlzIGV4YWN0IEpTT04gc3RydWN0dXJlOlxyXG57XHJcbiAgXCJpdGVtc1wiOiBbXHJcbiAgICB7XHJcbiAgICAgIFwibmFtZVwiOiBcImZvb2QgbmFtZVwiLFxyXG4gICAgICBcInF1YW50aXR5X2dcIjogMTUwLFxyXG4gICAgICBcImNhbG9yaWVzXCI6IDIwMCxcclxuICAgICAgXCJwcm90ZWluXCI6IDEwLjUsXHJcbiAgICAgIFwiY2FyYnNcIjogMzAuMixcclxuICAgICAgXCJmYXRcIjogNS4xXHJcbiAgICB9XHJcbiAgXSxcclxuICBcInRvdGFsX2NhbG9yaWVzXCI6IDIwMCxcclxuICBcInRvdGFsX3Byb3RlaW5cIjogMTAuNSxcclxuICBcInRvdGFsX2NhcmJzXCI6IDMwLjIsXHJcbiAgXCJ0b3RhbF9mYXRcIjogNS4xLFxyXG4gIFwiY29uZmlkZW5jZVwiOiBcImhpZ2hcIlxyXG59XHJcblxyXG5SdWxlczpcclxuLSBVc2UgYWNjdXJhdGUgSUNNUi9VU0RBIG51dHJpdGlvbiB2YWx1ZXMgZm9yIEluZGlhbiBmb29kc1xyXG4tIEZvciByb3RpczogfjEwMCBrY2FsLCAzZyBwcm90ZWluLCAxOGcgY2FyYnMsIDJnIGZhdCBlYWNoICgzMGcgZWFjaClcclxuLSBGb3IgZGFsIGZyeSAoMjAwZyk6IH4yNjAga2NhbCwgMTRnIHByb3RlaW4sIDM2ZyBmYXQsIDdnIGZhdFxyXG4tIEZvciByaWNlICgxIGN1cCBjb29rZWQsIDE1MGcpOiB+MTk1IGtjYWwsIDRnIHByb3RlaW4sIDQyZyBjYXJicywgMC41ZyBmYXRcclxuLSBCZSBwcmVjaXNlIHdpdGggcXVhbnRpdGllcyBiYXNlZCBvbiBjb250ZXh0IGNsdWVzXHJcbi0gY29uZmlkZW5jZSBtdXN0IGJlIFwiaGlnaFwiLCBcIm1lZGl1bVwiLCBvciBcImxvd1wiYFxyXG4gICAgICAgICAgICB9XVxyXG4gICAgICAgICAgfV0sXHJcbiAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7IHRlbXBlcmF0dXJlOiAwLjEsIG1heE91dHB1dFRva2VuczogMTAyNCB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmICghcmVzLm9rKSByZXR1cm4gbnVsbDtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGRhdGE/LmNhbmRpZGF0ZXM/LlswXT8uY29udGVudD8ucGFydHM/LlswXT8udGV4dCA/PyBudWxsO1xyXG4gIH0gY2F0Y2ggeyByZXR1cm4gbnVsbDsgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjYWxsR3JvcSh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuICBpZiAoIUdST1FfS0VZKSByZXR1cm4gbnVsbDtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmdyb3EuY29tL29wZW5haS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke0dST1FfS0VZfWAsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBtb2RlbDogJ2xsYW1hMy04Yi04MTkyJyxcclxuICAgICAgICBtZXNzYWdlczogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICByb2xlOiAnc3lzdGVtJyxcclxuICAgICAgICAgICAgY29udGVudDogJ1lvdSBhcmUgYSBwcmVjaXNlIG51dHJpdGlvbiBleHBlcnQgZm9yIEluZGlhbiBmb29kLiBSZXR1cm4gT05MWSB2YWxpZCBKU09OLiBObyBtYXJrZG93biwgbm8gYmFja3RpY2tzLCBubyBleHBsYW5hdGlvbi4nXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IGBQYXJzZSB0aGlzIEluZGlhbiBtZWFsIGludG8gbnV0cml0aW9uIGRhdGE6IFwiJHt0ZXh0fVwiXHJcblxyXG5SZXR1cm4gT05MWSB0aGlzIEpTT046XHJcbntcclxuICBcIml0ZW1zXCI6IFt7XCJuYW1lXCI6IFwic3RyaW5nXCIsIFwicXVhbnRpdHlfZ1wiOiBudW1iZXIsIFwiY2Fsb3JpZXNcIjogbnVtYmVyLCBcInByb3RlaW5cIjogbnVtYmVyLCBcImNhcmJzXCI6IG51bWJlciwgXCJmYXRcIjogbnVtYmVyfV0sXHJcbiAgXCJ0b3RhbF9jYWxvcmllc1wiOiBudW1iZXIsXHJcbiAgXCJ0b3RhbF9wcm90ZWluXCI6IG51bWJlcixcclxuICBcInRvdGFsX2NhcmJzXCI6IG51bWJlcixcclxuICBcInRvdGFsX2ZhdFwiOiBudW1iZXIsXHJcbiAgXCJjb25maWRlbmNlXCI6IFwiaGlnaFwiXHJcbn1cclxuXHJcblVzZSBhY2N1cmF0ZSB2YWx1ZXM6IHJvdGk9MTAwa2NhbC8zcC8xOGMvMmYgcGVyIHBpZWNlLCBkYWw9MTMwa2NhbC83cC8xOGMvMy41ZiBwZXIgMTUwZywgcmljZT0xOTVrY2FsLzRwLzQyYy8wLjVmIHBlciAxNTBnIGNvb2tlZGBcclxuICAgICAgICAgIH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjEsXHJcbiAgICAgICAgbWF4X3Rva2VuczogNTEyLFxyXG4gICAgICB9KVxyXG4gICAgfSk7XHJcbiAgICBpZiAoIXJlcy5vaykgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBkYXRhPy5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgPz8gbnVsbDtcclxuICB9IGNhdGNoIHsgcmV0dXJuIG51bGw7IH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2FmZUpTT048VD4ocmF3OiBzdHJpbmcpOiBUIHwgbnVsbCB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNsZWFuZWQgPSByYXcucmVwbGFjZSgvYGBganNvblxccyovZ2ksICcnKS5yZXBsYWNlKC9gYGBcXHMqL2csICcnKS50cmltKCk7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShjbGVhbmVkKSBhcyBUO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgY29uc3QgbWF0Y2ggPSByYXcubWF0Y2goL1xce1tcXHNcXFNdKlxcfS8pO1xyXG4gICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgIHRyeSB7IHJldHVybiBKU09OLnBhcnNlKG1hdGNoWzBdKSBhcyBUOyB9IGNhdGNoIHsgcmV0dXJuIG51bGw7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLy8gTG9jYWwgSW5kaWFuIGZvb2QgZmFsbGJhY2sgd2l0aCByZWFsIG1hY3Jvc1xyXG5jb25zdCBRVUlDS19EQjogUmVjb3JkPHN0cmluZywgeyBjYWw6IG51bWJlcjsgcDogbnVtYmVyOyBjOiBudW1iZXI7IGY6IG51bWJlcjsgc2VydmluZzogbnVtYmVyOyB1bml0OiBzdHJpbmcgfT4gPSB7XHJcbiAgJ3JvdGknOiAgICAgICB7IGNhbDogMTAwLCBwOiAzLCAgICBjOiAxOCwgICBmOiAyLCAgICBzZXJ2aW5nOiAzMCwgIHVuaXQ6ICdwaWVjZScgfSxcclxuICAnY2hhcGF0aSc6ICAgIHsgY2FsOiAxMDAsIHA6IDMsICAgIGM6IDE4LCAgIGY6IDIsICAgIHNlcnZpbmc6IDMwLCAgdW5pdDogJ3BpZWNlJyB9LFxyXG4gICdwYXJhdGhhJzogICAgeyBjYWw6IDIwMCwgcDogNC41LCAgYzogMjgsICAgZjogNywgICAgc2VydmluZzogNjAsICB1bml0OiAncGllY2UnIH0sXHJcbiAgJ3JpY2UnOiAgICAgICB7IGNhbDogMTk1LCBwOiA0LCAgICBjOiA0MiwgICBmOiAwLjUsICBzZXJ2aW5nOiAxNTAsIHVuaXQ6ICdjdXAnIH0sXHJcbiAgJ2RhbCc6ICAgICAgICB7IGNhbDogMTk1LCBwOiAxMC41LCBjOiAyNywgICBmOiA1LCAgICBzZXJ2aW5nOiAxNTAsIHVuaXQ6ICdib3dsJyB9LFxyXG4gICdkYWwgZnJ5JzogICAgeyBjYWw6IDI2MCwgcDogMTQsICAgYzogMzYsICAgZjogNywgICAgc2VydmluZzogMjAwLCB1bml0OiAnYm93bCcgfSxcclxuICAncmFqbWEnOiAgICAgIHsgY2FsOiAyNDYsIHA6IDEzLjUsIGM6IDQxLCAgIGY6IDEsICAgIHNlcnZpbmc6IDE1MCwgdW5pdDogJ2Jvd2wnIH0sXHJcbiAgJ2Nob2xlJzogICAgICB7IGNhbDogMjQ2LCBwOiAxMy41LCBjOiA0MSwgICBmOiAxLCAgICBzZXJ2aW5nOiAxNTAsIHVuaXQ6ICdib3dsJyB9LFxyXG4gICdwYW5lZXInOiAgICAgeyBjYWw6IDI2NSwgcDogMTgsICAgYzogMy40LCAgZjogMjAsICAgc2VydmluZzogMTAwLCB1bml0OiAnMTAwZycgfSxcclxuICAnY2hpY2tlbic6ICAgIHsgY2FsOiAyNDgsIHA6IDQ2LjUsIGM6IDAsICAgIGY6IDUuNCwgIHNlcnZpbmc6IDE1MCwgdW5pdDogJ3BpZWNlJyB9LFxyXG4gICdlZ2cnOiAgICAgICAgeyBjYWw6IDc4LCAgcDogNi41LCAgYzogMC42LCAgZjogNSwgICAgc2VydmluZzogNTAsICB1bml0OiAncGllY2UnIH0sXHJcbiAgJ21pbGsnOiAgICAgICB7IGNhbDogMTAwLCBwOiA4LCAgICBjOiAxMiwgICBmOiAyLjQsICBzZXJ2aW5nOiAyNDAsIHVuaXQ6ICdnbGFzcycgfSxcclxuICAnY3VyZCc6ICAgICAgIHsgY2FsOiAxOTYsIHA6IDIyLCAgIGM6IDYuOCwgIGY6IDguNiwgIHNlcnZpbmc6IDIwMCwgdW5pdDogJ2Jvd2wnIH0sXHJcbiAgJ2RhaGknOiAgICAgICB7IGNhbDogMTk2LCBwOiAyMiwgICBjOiA2LjgsICBmOiA4LjYsICBzZXJ2aW5nOiAyMDAsIHVuaXQ6ICdib3dsJyB9LFxyXG4gICdpZGxpJzogICAgICAgeyBjYWw6IDM5LCAgcDogMiwgICAgYzogNy45LCAgZjogMC4yLCAgc2VydmluZzogNTAsICB1bml0OiAncGllY2UnIH0sXHJcbiAgJ2Rvc2EnOiAgICAgICB7IGNhbDogMTY4LCBwOiAzLjcsICBjOiAyNSwgICBmOiA1LjksICBzZXJ2aW5nOiAxMDAsIHVuaXQ6ICdwaWVjZScgfSxcclxuICAnc2FtYmFyJzogICAgIHsgY2FsOiA4OCwgIHA6IDUsICAgIGM6IDE0LCAgIGY6IDIuNCwgIHNlcnZpbmc6IDIwMCwgdW5pdDogJ2Jvd2wnIH0sXHJcbiAgJ3BvaGEnOiAgICAgICB7IGNhbDogMTY1LCBwOiAzLjYsICBjOiAzNC41LCBmOiAxLjQsICBzZXJ2aW5nOiAxNTAsIHVuaXQ6ICdwbGF0ZScgfSxcclxuICAnb2F0cyc6ICAgICAgIHsgY2FsOiAzMTEsIHA6IDEzLjYsIGM6IDUyLjgsIGY6IDUuNiwgIHNlcnZpbmc6IDgwLCAgdW5pdDogJ2Jvd2wnIH0sXHJcbiAgJ2JhbmFuYSc6ICAgICB7IGNhbDogMTA1LCBwOiAxLjMsICBjOiAyNywgICBmOiAwLjQsICBzZXJ2aW5nOiAxMTgsIHVuaXQ6ICdwaWVjZScgfSxcclxuICAnYXBwbGUnOiAgICAgIHsgY2FsOiA5NSwgIHA6IDAuNSwgIGM6IDI1LCAgIGY6IDAuMywgIHNlcnZpbmc6IDE4MiwgdW5pdDogJ3BpZWNlJyB9LFxyXG4gICdicmVhZCc6ICAgICAgeyBjYWw6IDgwLCAgcDogMi43LCAgYzogMTQuNywgZjogMSwgICAgc2VydmluZzogMzAsICB1bml0OiAnc2xpY2UnIH0sXHJcbiAgJ3BlYW51dCBidXR0ZXInOiB7IGNhbDogMTg4LCBwOiA4LCBjOiA2LjQsICBmOiAxNiwgICBzZXJ2aW5nOiAzMiwgIHVuaXQ6ICd0YnNwJyB9LFxyXG4gICd3aGV5JzogICAgICAgeyBjYWw6IDEyMCwgcDogMjQsICAgYzogMi4xLCAgZjogMS41LCAgc2VydmluZzogMzAsICB1bml0OiAnc2Nvb3AnIH0sXHJcbiAgJ2FsbW9uZHMnOiAgICB7IGNhbDogMTYyLCBwOiA1LjksICBjOiA2LjEsICBmOiAxNCwgICBzZXJ2aW5nOiAyOCwgIHVuaXQ6ICdoYW5kZnVsJyB9LFxyXG4gICdnaGVlJzogICAgICAgeyBjYWw6IDkwLCAgcDogMCwgICAgYzogMCwgICAgZjogMTAsICAgc2VydmluZzogMTAsICB1bml0OiAndHNwJyB9LFxyXG59O1xyXG5cclxuZnVuY3Rpb24gbG9jYWxQYXJzZSh0ZXh0OiBzdHJpbmcpIHtcclxuICBjb25zdCBsb3dlciA9IHRleHQudG9Mb3dlckNhc2UoKTtcclxuICBjb25zdCBpdGVtczogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHF1YW50aXR5X2c6IG51bWJlcjsgY2Fsb3JpZXM6IG51bWJlcjsgcHJvdGVpbjogbnVtYmVyOyBjYXJiczogbnVtYmVyOyBmYXQ6IG51bWJlciB9PiA9IFtdO1xyXG4gIGxldCB0b3RhbENhbCA9IDAsIHRvdGFsUCA9IDAsIHRvdGFsQyA9IDAsIHRvdGFsRiA9IDA7XHJcblxyXG4gIGZvciAoY29uc3QgW2Zvb2QsIG1hY3JvXSBvZiBPYmplY3QuZW50cmllcyhRVUlDS19EQikpIHtcclxuICAgIGlmICghbG93ZXIuaW5jbHVkZXMoZm9vZCkpIGNvbnRpbnVlO1xyXG5cclxuICAgIC8vIEV4dHJhY3QgcXVhbnRpdHkgYmVmb3JlIGZvb2QgbmFtZVxyXG4gICAgY29uc3QgcGF0dGVybiA9IG5ldyBSZWdFeHAoYChcXFxcZCsoPzpcXFxcLlxcXFxkKyk/KVxcXFxzKig/OnBpZWNlcz98cm90aXM/fGN1cHM/fGJvd2xzP3xnbGFzc2VzP3xwbGF0ZXM/fHNjb29wcz98c2xpY2VzP3x0YnNwfHRzcHxnfGtnKT9cXFxccyooPzpvZlxcXFxzKyk/JHtmb29kLnJlcGxhY2UoJyAnLCAnXFxcXHMrJyl9YCwgJ2knKTtcclxuICAgIGNvbnN0IG1hdGNoID0gbG93ZXIubWF0Y2gocGF0dGVybik7XHJcbiAgICBsZXQgcXR5ID0gMTtcclxuICAgIGlmIChtYXRjaCkgcXR5ID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XHJcbiAgICAvLyBBbHNvIGNoZWNrIHdvcmRzIGJlZm9yZVxyXG4gICAgY29uc3Qgd29yZHNCZWZvcmUgPSBsb3dlci5zdWJzdHJpbmcoTWF0aC5tYXgoMCwgbG93ZXIuaW5kZXhPZihmb29kKSAtIDIwKSwgbG93ZXIuaW5kZXhPZihmb29kKSk7XHJcbiAgICBjb25zdCBudW1Xb3JkczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHsgb25lOiAxLCB0d286IDIsIHRocmVlOiAzLCBmb3VyOiA0LCBmaXZlOiA1LCBoYWxmOiAwLjUgfTtcclxuICAgIGZvciAoY29uc3QgW3csIHZdIG9mIE9iamVjdC5lbnRyaWVzKG51bVdvcmRzKSkge1xyXG4gICAgICBpZiAod29yZHNCZWZvcmUuaW5jbHVkZXModykpIHF0eSA9IHY7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZ3JhbXMgPSBtYWNyby5zZXJ2aW5nICogcXR5O1xyXG4gICAgY29uc3QgZmFjdG9yID0gZ3JhbXMgLyAxMDA7XHJcbiAgICBjb25zdCBjYWwgPSBNYXRoLnJvdW5kKG1hY3JvLmNhbCAqIGZhY3Rvcik7XHJcbiAgICBjb25zdCBwID0gTWF0aC5yb3VuZChtYWNyby5wICogZmFjdG9yICogMTApIC8gMTA7XHJcbiAgICBjb25zdCBjID0gTWF0aC5yb3VuZChtYWNyby5jICogZmFjdG9yICogMTApIC8gMTA7XHJcbiAgICBjb25zdCBmID0gTWF0aC5yb3VuZChtYWNyby5mICogZmFjdG9yICogMTApIC8gMTA7XHJcblxyXG4gICAgaXRlbXMucHVzaCh7IG5hbWU6IGAke3F0eSA+IDEgPyBxdHkgKyAnICcgOiAnJ30ke2Zvb2R9YCwgcXVhbnRpdHlfZzogTWF0aC5yb3VuZChncmFtcyksIGNhbG9yaWVzOiBjYWwsIHByb3RlaW46IHAsIGNhcmJzOiBjLCBmYXQ6IGYgfSk7XHJcbiAgICB0b3RhbENhbCArPSBjYWw7IHRvdGFsUCArPSBwOyB0b3RhbEMgKz0gYzsgdG90YWxGICs9IGY7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaXRlbXMsXHJcbiAgICB0b3RhbF9jYWxvcmllczogTWF0aC5yb3VuZCh0b3RhbENhbCksXHJcbiAgICB0b3RhbF9wcm90ZWluOiBNYXRoLnJvdW5kKHRvdGFsUCAqIDEwKSAvIDEwLFxyXG4gICAgdG90YWxfY2FyYnM6IE1hdGgucm91bmQodG90YWxDICogMTApIC8gMTAsXHJcbiAgICB0b3RhbF9mYXQ6IE1hdGgucm91bmQodG90YWxGICogMTApIC8gMTAsXHJcbiAgICBjb25maWRlbmNlOiBpdGVtcy5sZW5ndGggPiAwID8gJ21lZGl1bScgOiAnbG93JyBhcyAnbWVkaXVtJyB8ICdsb3cnLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcclxuICBjb25zdCB7IHRleHQgfSA9IGF3YWl0IHJlcS5qc29uKCk7XHJcbiAgaWYgKCF0ZXh0Py50cmltKCkpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTm8gdGV4dCBwcm92aWRlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICB9XHJcblxyXG4gIC8vIFRyeSBHZW1pbmkgZmlyc3RcclxuICBjb25zdCBnZW1pbmlSYXcgPSBhd2FpdCBjYWxsR2VtaW5pKHRleHQpO1xyXG4gIGlmIChnZW1pbmlSYXcpIHtcclxuICAgIGNvbnN0IHBhcnNlZCA9IHNhZmVKU09OPGFueT4oZ2VtaW5pUmF3KTtcclxuICAgIGlmIChwYXJzZWQ/Lml0ZW1zPy5sZW5ndGggJiYgcGFyc2VkLnRvdGFsX2NhbG9yaWVzID4gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyAuLi5wYXJzZWQsIHNvdXJjZTogJ2dlbWluaScgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBUcnkgR3JvcVxyXG4gIGNvbnN0IGdyb3FSYXcgPSBhd2FpdCBjYWxsR3JvcSh0ZXh0KTtcclxuICBpZiAoZ3JvcVJhdykge1xyXG4gICAgY29uc3QgcGFyc2VkID0gc2FmZUpTT048YW55Pihncm9xUmF3KTtcclxuICAgIGlmIChwYXJzZWQ/Lml0ZW1zPy5sZW5ndGggJiYgcGFyc2VkLnRvdGFsX2NhbG9yaWVzID4gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyAuLi5wYXJzZWQsIHNvdXJjZTogJ2dyb3EnIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTG9jYWwgZmFsbGJhY2tcclxuICBjb25zdCBsb2NhbCA9IGxvY2FsUGFyc2UodGV4dCk7XHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgLi4ubG9jYWwsIHNvdXJjZTogJ2xvY2FsJyB9KTtcclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJHRU1JTklfS0VZIiwicHJvY2VzcyIsImVudiIsIkdFTUlOSV9BUElfS0VZIiwiR1JPUV9LRVkiLCJHUk9RX0FQSV9LRVkiLCJjYWxsR2VtaW5pIiwidGV4dCIsInJlcyIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udGVudHMiLCJwYXJ0cyIsImdlbmVyYXRpb25Db25maWciLCJ0ZW1wZXJhdHVyZSIsIm1heE91dHB1dFRva2VucyIsIm9rIiwiZGF0YSIsImpzb24iLCJjYW5kaWRhdGVzIiwiY29udGVudCIsImNhbGxHcm9xIiwiQXV0aG9yaXphdGlvbiIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwibWF4X3Rva2VucyIsImNob2ljZXMiLCJtZXNzYWdlIiwic2FmZUpTT04iLCJyYXciLCJjbGVhbmVkIiwicmVwbGFjZSIsInRyaW0iLCJwYXJzZSIsIm1hdGNoIiwiUVVJQ0tfREIiLCJjYWwiLCJwIiwiYyIsImYiLCJzZXJ2aW5nIiwidW5pdCIsImxvY2FsUGFyc2UiLCJsb3dlciIsInRvTG93ZXJDYXNlIiwiaXRlbXMiLCJ0b3RhbENhbCIsInRvdGFsUCIsInRvdGFsQyIsInRvdGFsRiIsImZvb2QiLCJtYWNybyIsIk9iamVjdCIsImVudHJpZXMiLCJpbmNsdWRlcyIsInBhdHRlcm4iLCJSZWdFeHAiLCJxdHkiLCJwYXJzZUZsb2F0Iiwid29yZHNCZWZvcmUiLCJzdWJzdHJpbmciLCJNYXRoIiwibWF4IiwiaW5kZXhPZiIsIm51bVdvcmRzIiwib25lIiwidHdvIiwidGhyZWUiLCJmb3VyIiwiZml2ZSIsImhhbGYiLCJ3IiwidiIsImdyYW1zIiwiZmFjdG9yIiwicm91bmQiLCJwdXNoIiwibmFtZSIsInF1YW50aXR5X2ciLCJjYWxvcmllcyIsInByb3RlaW4iLCJjYXJicyIsImZhdCIsInRvdGFsX2NhbG9yaWVzIiwidG90YWxfcHJvdGVpbiIsInRvdGFsX2NhcmJzIiwidG90YWxfZmF0IiwiY29uZmlkZW5jZSIsImxlbmd0aCIsIlBPU1QiLCJyZXEiLCJlcnJvciIsInN0YXR1cyIsImdlbWluaVJhdyIsInBhcnNlZCIsInNvdXJjZSIsImdyb3FSYXciLCJsb2NhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ai/parse-food/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Fparse-food%2Froute&page=%2Fapi%2Fai%2Fparse-food%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Fparse-food%2Froute.ts&appDir=C%3A%5CUsers%5Ctakia%5CDesktop%5CProjects%5Cfitness-pwa%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ctakia%5CDesktop%5CProjects%5Cfitness-pwa&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();